<?php require_once '../includes/config.php'; if (!isset($_SESSION['admin_id'])) { header('Location: login.php'); exit; } $stmt = $pdo->query("SELECT * FROM contacts ORDER BY date_envoi DESC"); $messages = $stmt->fetchAll(); ?><!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><title>Messages - Admin</title><link rel="stylesheet" href="../css/style.css"></head><body><header><div class="header-content"><div class="logo"><h1>Admin - TechSolutions</h1></div><nav><ul><li><a href="dashboard.php">Tableau de bord</a></li><li><a href="actualites.php">Actualités</a></li><li><a href="contacts.php">Messages</a></li><li><a href="composants.php">Composants</a></li><li><a href="logout.php">Déconnexion</a></li></ul></nav></div></header><div class="container"><h2>Messages de Contact</h2><div class="content-box"><table><thead><tr><th>Date</th><th>Nom</th><th>Email</th><th>Sujet</th><th>Message</th><th>Statut</th></tr></thead><tbody><?php foreach($messages as $msg): ?><tr><td><?php echo date('d/m/Y H:i', strtotime($msg['date_envoi'])); ?></td><td><?php echo htmlspecialchars($msg['nom']); ?></td><td><?php echo htmlspecialchars($msg['email']); ?></td><td><?php echo htmlspecialchars($msg['sujet']); ?></td><td><?php echo htmlspecialchars(substr($msg['message'], 0, 100)) . '...'; ?></td><td><?php echo ucfirst($msg['statut']); ?></td></tr><?php endforeach; ?></tbody></table></div></div><footer><p>&copy; 2025 TechSolutions</p></footer></body></html>
