<?php require_once '../includes/config.php'; if (!isset($_SESSION['admin_id'])) { header('Location: login.php'); exit; } $stmt = $pdo->query("SELECT * FROM composants ORDER BY categorie, reference"); $composants = $stmt->fetchAll(); $categories = []; foreach ($composants as $comp) { $categories[$comp['categorie']][] = $comp; } ?><!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><title>Composants - Admin</title><link rel="stylesheet" href="../css/style.css"></head><body><header><div class="header-content"><div class="logo"><h1>Admin - TechSolutions</h1></div><nav><ul><li><a href="dashboard.php">Tableau de bord</a></li><li><a href="actualites.php">Actualités</a></li><li><a href="contacts.php">Messages</a></li><li><a href="composants.php">Composants</a></li><li><a href="logout.php">Déconnexion</a></li></ul></nav></div></header><div class="container"><h2>Catalogue des Composants PC</h2><?php foreach($categories as $categorie => $items): ?><div class="content-box"><h3><?php echo htmlspecialchars($categorie); ?></h3><table><thead><tr><th>Référence</th><th>Libellé</th><th>Prix HT</th><th>Lien</th></tr></thead><tbody><?php foreach($items as $item): ?><tr><td><?php echo htmlspecialchars($item['reference']); ?></td><td><?php echo htmlspecialchars($item['libelle']); ?></td><td><?php echo number_format($item['prix_ht'], 2, ',', ' '); ?> €</td><td><?php if($item['url']): ?><a href="<?php echo htmlspecialchars($item['url']); ?>" target="_blank">Voir</a><?php endif; ?></td></tr><?php endforeach; ?></tbody></table></div><?php endforeach; ?></div><footer><p>&copy; 2025 TechSolutions</p></footer></body></html>
